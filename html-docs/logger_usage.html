<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Qudi: How to use the logger in Qudi</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Qudi
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">How to use the logger in Qudi </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>Qudi uses the <a href="https://docs.python.org/3/library/logging.html">Python Logging Module</a> from the Python Standard Library to manage all logging messages.</p>
<p>In general, the logging functionality is an essential feature for any software developer, especially if the program grows in size and complexity.</p>
<h2>General functionality of the logger and why 'print()' is not always a good idea.</h2>
<p>Qudi implements a core logger, which will carry together all child logger (from the Qudi modules and from external module, who are using the logging module like mentioned in the section <a href="#log_external">Logger in external file</a>). The main advantage of this procedure is that third party modules, which are using the Standard Python Logger, are transferred to the core logger and are logged too. This includes also self defined modules, which can be imported into Qudi modules. That means there is no need for external modules to be connected to Qudi to ensure the logging functionality, if the external modules are tested and executed independent of Qudi.</p>
<p>Additionally, the manager GUI of Qudi will be able to show all (!) logging messages from all files, which use the logging module.</p>
<p>That makes is easier and more convenient to use the logging module.</p>
<p>The print() function in python is only a better option whenever the main application lies in <b>displaying a help</b> statement, which might often be the case in command line applications and sometimes for on the fly scripts.</p>
<p>There are some arguments, why logging is better than print [<a href="#lit_1">1</a>]:</p>
<ul>
<li>Events logged in included modules are automatically accessible via the root logger to your applicationâ€™s logging stream, unless you filter them out.</li>
<li>The log record, which is created with every logging event, contains readily available diagnostic information such as the file name, full path, function, and line number of the logging event.</li>
<li>Logging can be selectively silenced by using the method logging.Logger.setLevel() or disabled by setting the attribute logging.Logger.disabled to True.</li>
</ul>
<h2><a class="anchor" id="log_external"></a> Logger in external file</h2>
<p>If you want to use the logging module in external file, which are not collected to Qudi, then it is pretty easy to do that! Just add these following three lines of code </p><pre class="fragment">import logging
logging.basicConfig(filename='logfile.log', filemode='w', level=logging.DEBUG)
logger = logging.getLogger(__name__)
</pre><p>at the header of your script and the basic logger is ready to be used. Of course you can adjust the name of the filename (here 'logfile.log') and the loglevel (here logging.DEBUG) according to your needs. That will at least ensure, that a file will be prepared with the name 'logfile.log', which contains all log messages up to the level debug (i.e. basically every message).</p>
<p>Within the code, the logger can then be used like </p><pre class="fragment"># (...) some code

logger.info('A status message.')

# (...) some code

logger.warning('You should be careful!')

# (...) some code

logger.debug('Some infos which are less important.')

# (...) some code

logger.error('That is wrong. Correct that or do not do that again!')

# (...) some code

logger.critical('That is extremly dangerous and will seriouly harm the program or the devide!')
</pre><h2>How to use the logger within Qudi</h2>
<p>Even before Qudi is started, the core logger of Qudi will be initialized and will collect all the log messages and appearing exceptions upon the starting procedure. I.e. if there appears an error in the configuration of the modules or if modules are not present, which are needed at startup of Qudi, then the error message(s) are collected in the root directory of qudi. Have a look in those log files, if you encounter problems with Qudi, or if the Qudi Manager does not even appear.</p>
<p>Each module in Qudi will by default have an attribute log, by which you can access the logger of the specific module. If you take for instance the CounterLogic, situated in the file logic/counter_logic.py, then you can use the logger like</p>
<div class="fragment"><div class="line"># (...some import stuff...)</div><div class="line"></div><div class="line">class CounterLogic(GenericLogic):</div><div class="line"></div><div class="line">    # (...) some code</div><div class="line">    def __init__(self, config, **kwargs):</div><div class="line">        &quot;&quot;&quot; Create CounterLogic object with connectors.</div><div class="line"></div><div class="line">        @param dict config: module configuration</div><div class="line">        @param dict kwargs: optional parameters</div><div class="line">        &quot;&quot;&quot;</div><div class="line">        super().__init__(config=config, **kwargs)</div><div class="line"></div><div class="line">    def my_test_method(self):</div><div class="line"></div><div class="line">        # some log methods.</div><div class="line"></div><div class="line">        self.log.debug(&#39;That is an unneeded debug message.&#39;)</div><div class="line">        self.log.info(&#39;That is an info message.&#39;)</div><div class="line">        self.log.warning(&#39;That is a warning!&#39;)</div></div><!-- fragment --><h2>Location of the log file</h2>
<p>The log file will be situated either in the root directory of Qudi or in the current directory where the external module is loaded. With</p>
<div class="fragment"><div class="line">import os</div><div class="line">print(os.getcwd())</div></div><!-- fragment --><p>you can find out the current directory, where the file is executed. There the log file should be situated.</p>
<h2>Arguments passed to the logger</h2>
<p>Unlike the build-in print method python, which accepts arbitrary input arguments, the log methods only accept one argument. The input argument will be converted to a string by default. </p><div class="fragment"><div class="line">import logging</div><div class="line">logger = logging.getLogger(__name__)</div><div class="line"></div><div class="line">import os</div><div class="line">logger.info(os)</div></div><!-- fragment --><p> &gt;&gt;&gt; &lt;module 'os' from '...\Anaconda3\lib\os.py'&gt;</p>
<h2>Logging Levels in Qudi</h2>
<p>The logging used throughout qudi are the same defined in description of the logging package, which can be obtained <a href="https://docs.python.org/3/library/logging.html#logging-levels">here</a>.</p>
<table class="doxtable">
<tr>
<th>log in external module </th><th align="left">log within Qudi </th><th align="center">Numeric value  </th></tr>
<tr>
<td>log.critical(...) </td><td align="left">self.log.critical(...) </td><td align="center">50 </td></tr>
<tr>
<td>log.error(...) </td><td align="left">self.log.error(...) </td><td align="center">40 </td></tr>
<tr>
<td>log.warning(...) </td><td align="left">self.log.warning(...) </td><td align="center">30 </td></tr>
<tr>
<td>log.info(...) </td><td align="left">self.log.info(...) </td><td align="center">20 </td></tr>
<tr>
<td>log.debug(...) </td><td align="left">self.log.debug(...) </td><td align="center">10 </td></tr>
</table>
<p>A short note on the different log levels:</p>
<p>The purpose of the different log levels are almost self explaining.</p>
<p>Hoever, use the log level critical in very severe cases since that level should be reserved for really bad event, like out of memory, disk is full or nuclear meltdown,... . In many other cases the error level will serve well.</p>
<h2>Further information concerning the logging package</h2>
<p><a class="anchor" id="lit_1"></a>[1]: <a href="http://docs.python-guide.org/en/latest/writing/logging/#or-print">http://docs.python-guide.org/en/latest/writing/logging/#or-print</a> <br />
 <a class="anchor" id="lit_2"></a>[2]: <a href="https://docs.python.org/3/library/logging.html">https://docs.python.org/3/library/logging.html</a> <br />
 <a class="anchor" id="lit_3"></a>[3]: <a href="https://docs.python.org/3/howto/logging.html">https://docs.python.org/3/howto/logging.html</a> <br />
 </p>
</div></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.13
</small></address>
</body>
</html>
